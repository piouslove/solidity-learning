# 二、用Geth搭建私有链
## 定制化私有链的原始状态
这一步实际上就是创建一个以太坊私有链的创世区块。  
* 首先，创建起始状态  

创建一个JSON文件标明起始状态，像下面这样：  
```
{
  "config": {
        "chainId": 0,
        "homesteadBlock": 0,
        "eip155Block": 0,
        "eip158Block": 0
    },
  "alloc"      : {},
  "coinbase"   : "0x0000000000000000000000000000000000000000",
  "difficulty" : "0x20000",
  "extraData"  : "",
  "gasLimit"   : "0x2fefd8",
  "nonce"      : "0x0000000000000042",
  "mixhash"    : "0x0000000000000000000000000000000000000000000000000000000000000000",
  "parentHash" : "0x0000000000000000000000000000000000000000000000000000000000000000",
  "timestamp"  : "0x00"
}
```
建议将`nonce`的值调的足够随机，防止未知的远程节点连接到你的私有链上。  
可以在创世的时候使用帐户配置填充`alloc`字段来为某些帐户提供资金，就用像下面这样的字段替换上面JSON文件中的`alloc`字段：  
```
"alloc": {
  "0x0000000000000000000000000000000000000001": {"balance": "111111111"},
  "0x0000000000000000000000000000000000000002": {"balance": "222222222"}
}
```
* 初始化私有链状态  

需要在启动之前使用上述JSON文件中定义的起源状态初始化每个Geth节点，以确保正确设置所有区块链参数：  
```
$ geth init path/to/genesis.json
```  
一般我们在自己电脑上设置一个节点就够了，毕竟并不是要真正搭一条私有链，我们的目的是solidity开发环境。  
因此，我们在系统命令行执行上述命令即可达到我们的目的，注意把`path/to/`替换为上面创建的json文件的正确路径。  
事实上目前工作完成之后已经可以满足我们的需求了，只要你在`alloc`字段足够多的账户和资金来保证合约代码可以正常测试就可以了。  
剩下的挖矿、合约部署和状态账本等问题我们可以靠官方提供的JS库`web3.js`来解决，后边章节会介绍。  
但是，Geth也可以解决上句话所说的问题，它还可以帮我们搭建一个多个节点的私有链。如果你有兴趣，请往下看。
